<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.application.foodhub.user.UserDAO">
	
	
	<!-- 회원가입 -->
	<insert id="register" parameterType="UserDTO">
		INSERT INTO USER (
			USER_ID,
			PROFILE_ORIGINAL,
			PROFILE_UUID,
			NICKNAME,
			EMAIL,
			TEL,
			GENDER,
			BIRTHDAY,
			MEMBERSHIP_TYPE,
			FOUNDING_AT,
			BUSINESS_TYPE,
			PASSWD,
			SMS_YN,
			EMAIL_YN,
			JOIN_AT,
			MODIFY_AT
		) 
		VALUES (
			#{userId},
			#{profileOriginal},
			#{profileUuid},
			#{nickname},
			#{email},
			#{tel},
			#{gender},
			#{birthday},
			#{membershipType},
			#{foundingAt},
			#{businessType},
			#{passwd},
			#{smsYn},			
			#{emailYn},
			NOW(),
			NOW()
		 )
	</insert>
	
	<select id="checkValidId" parameterType="String" resultType="String"> 
		SELECT USER_ID
		FROM   USER
		WHERE  USER_ID = #{userId}
	</select>
	
	<!-- 닉네임 중복 체크 -->
	<select id="checkValidNickname" parameterType="String" resultType="String"> 
		SELECT NICKNAME
		FROM   USER
		WHERE  NICKNAME = #{nickname}
	</select>
	
	<select id="checkValidEmail" parameterType="String" resultType="String"> 
		SELECT EMAIL
		FROM   USER
		WHERE  EMAIL = #{email}
	</select>
	
	<select id="getEncodedPasswd" parameterType="String" resultType="String">
		SELECT 	PASSWD
		FROM 	USER
		WHERE	USER_ID = #{userId}
	</select>
	
</mapper>